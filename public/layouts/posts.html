<div class="row">
  <table class="posts">
    <tr class="post" ng-repeat="post in posts">
      <td class="aright">{{post.score}}</td>
      <td class="full">
        <div class="title"><a ng-href="{{post.url}}" target="_blank">{{post.title}}</a></div>
        <div class="info"><a ng-href="/#{{post.permalink}}">{{post.num_comments}} Comments</a> | {{post.created_utc | timeago}}</div>
      </td>
    </tr>
  </table>

  <div class="comments" ng-if="comments.length">
    <div class="top-level comment" ng-repeat="comment in comments">
      <div class="title">{{comment.author}} | {{comment.ups - comment.downs}} points | {{comment.created_utc | timeago}}</div>
      <div class="description">{{comment.body}}</div>
      <div ng-include="'tree_comment.html'" ng-if="comment.replies.length"></div>
    </div>
  </div>
</div>

<script type="text/ng-template"  id="tree_comment.html">
  <div class="comment" ng-repeat="comment in comment.replies">
    <div class="title">{{comment.author}} | {{comment.ups - comment.downs}} points | {{comment.created_utc | timeago}}</div>
    <div class="description">{{comment.body}}</div>
    <div ng-include="'tree_comment.html'" ng-if="comment.replies.length"></div>
  </div>
</script>

